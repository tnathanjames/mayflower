<!DOCTYPE html>
<html class="pl no-js" lang="en">
  <head>
    <title>Mass Gov</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link rel="stylesheet" href="https://tnathanjames.github.io/mayflower/assets/css/index-generated.css?1522773552" media="all" />
    <link class="js-base-theme" rel="stylesheet" href="https://tnathanjames.github.io/mayflower/assets/css/base-theme-generated.css?1522773552" media="all" />
    <script>
      var baseThemeCss="https://tnathanjames.github.io/mayflower/assets/css/base-theme-generated.css";
      var govThemeCss="https://tnathanjames.github.io/mayflower/assets/css/gov-theme-generated.css?";
    </script>

    <script src="https://tnathanjames.github.io/mayflower/assets/js/vendor/modernizr.js"></script>

    <!-- Begin Pattern Lab (Required for Pattern Lab to run properly) -->
    <!-- never cache patterns -->
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<link rel="stylesheet" href="../../styleguide/css/styleguide.min.css?1522773552" media="all">
<link rel="stylesheet" href="../../styleguide/css/prism-typeahead.min.css?1522773552" media="all" />
    <!-- this file is just for pattern lab style guide styling -->
    <link rel="stylesheet" href="https://tnathanjames.github.io/mayflower/assets/css/pattern-scaffolding-generated.css?1522773552" media="all" />
    <!-- End Pattern Lab -->
    <script type="application/ld+json">
      { 
          "@context": "http://schema.org",
          "@type": "Organization",
          "@id": "http://mayflower.digital.mass.gov/#organization",
          "url": "http://mayflower.digital.mass.gov",
          "logo": "http://mayflower.digital.mass.gov/assets/images/stateseal-color.png",
          "name": "Commonwealth of Massachusetts",
          "sameAs": [
            "https://www.facebook.com/massgov/",
            "https://twitter.com/massgov/",
            "https://www.linkedin.com/company/commonwealth-of-massachusetts/",
            "https://www.youtube.com/user/massgov/",
            "https://www.instagram.com/massgov/"
            ]
      }
    </script>
    <script type="application/ld+json">
      {
          "@context": "http://schema.org",
          "@type": "WPHeader",
          "@id": "http://mayflower.digital.mass.gov/#header"
      }
    </script>
    <script type="application/ld+json">
      {
          "@context": "http://schema.org",
          "@type": "WPFooter",
          "@id": "http://mayflower.digital.mass.gov/#footer"
      }
    </script>  
    <script type="application/ld+json">
        {
          "@context": "http://schema.org",
          "@type": "SiteNavigationElement",
          "@id": "http://mayflower.digital.mass.gov/#main-navigation"
        }
    </script>  
  </head>
  <body class="" vocab="http://schema.org/" typeof="WebPage">
<div class="ma__ajax-pattern js-ajax-pattern" data-ma-ajax-endpoint="../../assets/data/emergency-alerts.json" data-ma-ajax-render-pattern="@organisms/by-template/emergency-alerts.twig">
</div>

    <!--DO NOT REMOVE-->
    <script type="text/json" id="sg-pattern-data-footer" class="sg-pattern-data">
  {"cssEnabled":false,"lineage":[],"lineageR":[{"lineagePattern":"templates-location","lineagePath":"..\/..\/patterns\/04-templates-01-content-types-location\/04-templates-01-content-types-location.html"},{"lineagePattern":"templates-organization-detail","lineagePath":"..\/..\/patterns\/04-templates-01-content-types-organization-detail\/04-templates-01-content-types-organization-detail.html"},{"lineagePattern":"templates-stacked-row-template","lineagePath":"..\/..\/patterns\/04-templates-stacked-row-template\/04-templates-stacked-row-template.html"},{"lineagePattern":"pages-location-park-content","lineagePath":"..\/..\/patterns\/05-pages-location-park-content\/05-pages-location-park-content.html"}],"patternBreadcrumb":{"patternType":"organisms","patternSubtype":"by template"},"patternDesc":"<h3>Description<\/h3>\n\n<p>This pattern is designed to facilitate client side rendering of another Mayflower pattern whose data is requested from an api endpoint.<\/p>\n\n<h3>Status<\/h3>\n\n<ul>\n<li>Alpha<\/li>\n<\/ul>\n\n<h3>Pattern Contains<\/h3>\n\n<p>This pattern can include whichever pattern is passed in via the <code>ajaxPattern.renderPattern<\/code> variable.<\/p>\n\n<p>This example implementation (see the data <code>ajaxPattern.json<\/code> file) includes Emergency Alerts.<\/p>\n\n<h3>Usage Guidelines<\/h3>\n\n<ul>\n<li>The intended pattern will render as is, if:\n\n<ul>\n<li>the endpoint is valid<\/li>\n<li>data matching the structure for <code>ajaxPattenr.renderPattern<\/code> is received<\/li>\n<\/ul><\/li>\n<li>If the endpoint will not provide data matching the structure, a custom selector can be passed into the component which will provide a hook for a custom transform function to create the necessary data structure. In this case, the implementation should include JavaScript that uses the <code>MassAjaxPattern jQuery plugin<\/code>, passing in a function that transforms the data from the endpoint into the structure needed to render <code>ajaxPattern.renderPattern<\/code>.  If there is no data and the pattern should not be rendered, then the transform function should return an empty javascript object <code>{}<\/code>.<\/li>\n<li>See usage guidelines for the child pattern (i.e. the value of <code>ajaxPattern.renderPattern<\/code>)<\/li>\n<\/ul>\n\n<h3>JavaScript Used<\/h3>\n\n<ul>\n<li>Requires <code>ma.themePath<\/code> (path to assets directory in your implementation) and <code>ma.patternsPath<\/code> (path to the directory which contains twig templates in your implementation) to be set in your js implementation (see <code>\/source\/_meta\/_00-foot.twig<\/code>)<\/li>\n<li>Ajax Pattern (<code>js\/modules\/ajaxPattern.js<\/code>)<\/li>\n<li>jQuery Extend for Ajax Pattern (<code>js\/helpers\/jQueryExtend_ajaxPattern.js<\/code>)<\/li>\n<\/ul>\n\n<p>Note: If the <code>ajaxPattern.renderPattern<\/code> pattern implements javascript (consult the <code>.md<\/code> documentation file for that pattern to find out), you will likely need to update that javascript to initialize the component once your new instance of that pattern has rendered (see the <code>MA:AjaxPattern:Render<\/code> event triggered by <code>js\/helpers\/jQueryExtend_ajaxPattern.js<\/code>).<\/p>\n\n<p>Currently, most of our pattern javascript is written in a way that initializes patterns which exist on the DOM on page load.<\/p>\n\n<p>See <code>js\/modules\/emergencyAlerts.js<\/code> for an example of pattern js which has already been updated to listen for and initialize on the <code>MA:AjaxPattern:Render<\/code> event.<\/p>\n\n<h3>Variables<\/h3>\n\n<pre><code>ajaxAlerts: {\n  endpoint: \n    type: string (url) \/ required\n  renderPattern: \n    type: string (namespaced path to pattern being rendered) \/ required\n  customSelector: \n    type: string \/ optional\n}\n<\/code><\/pre>\n\n<h3>Sample use of MassAjaxPattern<\/h3>\n\n<p>See live example in <code>js\/modules\/ajaxPatternOverride.js<\/code> which is used on <a href=\"\/?pages-guide\">@pages\/guide<\/a><\/p>\n\n<pre><code class=\"javascript\">$('.js-ajax-pattern-override').each(function(){\n    \/\/ Get the endpoint which is passed in as ajaxAlerts.endpoint to organism data attribute.\n    let endpoint = $(this).data('ma-ajax-endpoint');\n    if (!endpoint) {\n      console.error(\"MA::AjaxPattern::This pattern requires an endpoint to be passed in as an argument.\");\n      return false;\n    }\n\n    let renderPattern = $(this).data('ma-ajax-render-pattern');\n    if (!renderPattern) {\n      console.error(\"MA::AjaxPattern::This pattern requires a child pattern to be passed as an argument.\");\n      return false;\n    }\n    try {\n      $(this).MassAjaxPattern({\n        \"endpoint\": endpoint,\n        \"renderPattern\": renderPattern,\n        \"transform\": function(ajaxData) {\n          \/\/ Example of some custom data transformation being done to the data according to implementation needs.  This will often include restructuring of data.\n          data = ajaxData;\n          data.emergencyAlerts.emergencyHeader.title = \"This alert title was overridden by a custom transform function.\";\n          return data;\n        }\n      });\n    }\n    catch (e) {\n      console.error(e);\n    }\n  });\n<\/code><\/pre>","patternExtension":"twig","patternName":"ajax pattern","patternPartial":"organisms-ajax-pattern","patternState":"","extraOutput":[]}
</script>

<script>
  /*!
  * scriptLoader - v0.1
  *
  * Copyright (c) 2014 Dave Olsen, http://dmolsen.com
  * Licensed under the MIT license
  *
  */
  
  var scriptLoader = {
    run: function(js,cb,target) {
      var s  = document.getElementById(target+'-'+cb);
      for (var i = 0; i < js.length; i++) {
        var src = (typeof js[i] != 'string') ? js[i].src : js[i];
        var c   = document.createElement('script');
        c.src   = '../../'+src+'?'+cb;
        if (typeof js[i] != 'string') {
          if (js[i].dep !== undefined) {
            c.onload = function(dep,cb,target) {
              return function() {
                scriptLoader.run(dep,cb,target);
              }
            }(js[i].dep,cb,target);
          }
        }
        s.parentNode.insertBefore(c,s);
      }
    }
  }
</script>

<script id="pl-js-polyfill-insert-1522773552">
  (function() {
    if (self != top) {
      var cb = '1522773552';
      var js = [];
      if (typeof document !== 'undefined' && !('classList' in document.documentElement)) {
        js.push('styleguide/bower_components/classList.min.js');
      }
      scriptLoader.run(js,cb,'pl-js-polyfill-insert');
    }
  })();
</script>

<script id="pl-js-insert-1522773552">
  (function() {
    if (self != top) {
      var cb = '1522773552';
      var js = [ { 'src': 'styleguide/bower_components/jwerty.min.js', 'dep': [ 'styleguide/js/patternlab-pattern.min.js' ] } ];
      scriptLoader.run(js,cb,'pl-js-insert');
    }
  })();
</script>
    <script>
      var ma = ma || {};
      // path to where the handlebar templates are being stored.
      ma.themePath = "https://tnathanjames.github.io/mayflower/assets";
      // path to where twig templates are being stored (for twigJS).
      ma.twigPath = ma.themePath + "/patterns";
      ma.patternPaths = {
        '@base': ma.twigPath + "/00-base/",
        '@atoms': ma.twigPath + "/01-atoms/",
        '@molecules': ma.twigPath + "/02-molecules/",
        '@organisms': ma.twigPath + "/03-organisms/",
        '@templates': ma.twigPath + "/04-templates/",
        '@pages': ma.twigPath + "/05-pages/",
        '@meta': ma.twigPath + "/07-meta/"
      };
    </script>
    <script src="https://tnathanjames.github.io/mayflower/assets/js/vendor-generated.js"></script>
    <script src="https://tnathanjames.github.io/mayflower/assets/js/index-generated.js"></script>
    <script type="text/javascript">
      window.initGoogleMaps = function() {
        // Set a flag that the library has loaded, in case google maps js misses event.
        window.googleMapsLoaded = true;
        // Emit an event that the library has loaded.
        $(document).trigger('ma:LibrariesLoaded:GoogleMaps');
      }
    </script>

        <!-- Set google map libraries for event page -->
    
    <script src="//maps.googleapis.com/maps/api/js?key=AIzaSyD5HXUVAA4VyRXVX50taVe2hDY8hy2JSdA&v=3.28&libraries=geometry,places,geocoder&callback=initGoogleMaps"></script>

    <script>
      try {
        if($('.main-content').length === 0){
          var json = JSON.parse($("#sg-pattern-data-footer").html()),

          data = json.patternBreadcrumb.patternType;

          if(data !== 'templates' && data !== 'pages') {
            $('body').addClass('page-content');
            $('html').addClass('main-content').addClass('main-content--full');
          }
        }
      } catch(e) {}
    </script>

    <!-- JS to switch theme colors -->
    <script>
      (function(window, document, undefined) {
        "use strict";

        var forms = document.querySelectorAll('.js-header-search-form');
        var themeCssEl = document.querySelector('.js-base-theme');
        var cranberry = false;

        for (var i = 0; i < forms.length; ++i) {
          forms[i].addEventListener("submit", function(e){
            e.preventDefault();
            var color = this.querySelector('.ma__header-search__input').value;
            if (color === 'cranberry') {
              if (cranberry) { // revert back to base
                themeCssEl.setAttribute('href',baseThemeCss);
                switchClass('ma__colored-heading--cranberry', 'ma__colored-heading--green');
                switchClass('ma__narrow-template--cranberry', 'ma__narrow-template--green');
                switchClass('ma__action-card__item--cranberry', 'ma__action-card__item--green');
                switchClass('ma__page-banner--cranberry', 'ma__page-banner--blue');
              } else {  // convert to cranberry
                themeCssEl.setAttribute('href',govThemeCss);
                switchClass('ma__colored-heading--green', 'ma__colored-heading--cranberry');
                switchClass('ma__narrow-template--green', 'ma__narrow-template--cranberry');
                switchClass('ma__action-card__item--green', 'ma__action-card__item--cranberry');
                switchClass('ma__page-banner--blue', 'ma__page-banner--cranberry');
              }
              cranberry = !cranberry;
            }
          });
        }

        function switchClass(source, update) {
          var el = document.querySelectorAll('.' + source);

          for (var i = 0; i < el.length; ++i) {
            el[i].classList.remove(source);
            el[i].classList.add(update);
          }
        }

      })(window, document);

    </script>

  </body>
</html>
